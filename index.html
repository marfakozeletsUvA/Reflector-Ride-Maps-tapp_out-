<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bike Sensor Data Visualization</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
  <link href="styles.css" rel="stylesheet" />
  <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="https://unpkg.com/pmtiles@3.0.4/dist/pmtiles.js"></script>
  <script>
    var mapboxgl = maplibregl;
  </script>
</head>
<body>
<div id="map"></div>

<div id="controls">
  <h3>ðŸš´ Bike Routes</h3>
  
  <div class="control-group">
    <label class="checkbox-label">
      <input type="checkbox" id="speedColorsCheckbox">
      Show Speed Colors
    </label>
  </div>
  
  <div class="radio-group" id="speedModeGroup">
    <label class="radio-label">
      <input type="radio" name="speedMode" value="gradient" checked>
      Smooth Gradient
    </label>
    <label class="radio-label">
      <input type="radio" name="speedMode" value="categories">
      Speed Categories
    </label>
  </div>

  <button id="resetButton">â†© Reset View</button>
</div>

<div id="stats">
  <h4>Trip Info</h4>
  <div class="stat-row" id="statTripRow">
    <span class="stat-label">Total trips:</span>
    <span class="stat-value" id="statTrips">â€”</span>
  </div>
  <div class="stat-row" id="statDistanceRow">
    <span class="stat-label">Total distance:</span>
    <span class="stat-value" id="statDistance">â€”</span>
  </div>
  <div class="stat-row" id="statAvgSpeedRow">
    <span class="stat-label">Average speed:</span>
    <span class="stat-value" id="statAvgSpeed">â€”</span>
  </div>
  <div class="stat-row" id="statTotalTimeRow">
    <span class="stat-label">Total time:</span>
    <span class="stat-value" id="statTotalTime">â€”</span>
  </div>
  <div class="stat-row" id="selectedTripRow">
    <span class="stat-label">Selected:</span>
    <span class="stat-value" id="selectedTrip">â€”</span>
  </div>
</div>

<div class="legend" id="speedLegend">
  <h4>Speed (km/h)</h4>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #808080;"></div>
    <span>Stopped (0-2)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #DC2626;"></div>
    <span>Very Slow (2-5)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #F97316;"></div>
    <span>Slow (5-10)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #FACC15;"></div>
    <span>Moderate (10-15)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #22C55E;"></div>
    <span>Fast (15-20)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #3B82F6;"></div>
    <span>Very Fast (20-25)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #6366F1;"></div>
    <span>Extreme (25+)</span>
  </div>
</div>

<script type="module" src="config.js"></script>
<script type="module" src="app.js"></script>
</body>
</html>